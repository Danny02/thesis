{
  "url": "https://api.github.com/repos/olafurpg/scalafmt/issues/127",
  "repository_url": "https://api.github.com/repos/olafurpg/scalafmt",
  "labels_url": "https://api.github.com/repos/olafurpg/scalafmt/issues/127/labels{/name}",
  "comments_url": "https://api.github.com/repos/olafurpg/scalafmt/issues/127/comments",
  "events_url": "https://api.github.com/repos/olafurpg/scalafmt/issues/127/events",
  "html_url": "https://github.com/olafurpg/scalafmt/issues/127",
  "id": 141443651,
  "number": 127,
  "title": "Files in Scalding hang",
  "user": {
    "login": "ianoc",
    "id": 446652,
    "avatar_url": "https://avatars.githubusercontent.com/u/446652?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ianoc",
    "html_url": "https://github.com/ianoc",
    "followers_url": "https://api.github.com/users/ianoc/followers",
    "following_url": "https://api.github.com/users/ianoc/following{/other_user}",
    "gists_url": "https://api.github.com/users/ianoc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ianoc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ianoc/subscriptions",
    "organizations_url": "https://api.github.com/users/ianoc/orgs",
    "repos_url": "https://api.github.com/users/ianoc/repos",
    "events_url": "https://api.github.com/users/ianoc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ianoc/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/olafurpg/scalafmt/issues/comments/197786500",
      "html_url": "https://github.com/olafurpg/scalafmt/issues/127#issuecomment-197786500",
      "issue_url": "https://api.github.com/repos/olafurpg/scalafmt/issues/127",
      "id": 197786500,
      "user": {
        "login": "olafurpg",
        "id": 1408093,
        "avatar_url": "https://avatars.githubusercontent.com/u/1408093?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/olafurpg",
        "html_url": "https://github.com/olafurpg",
        "followers_url": "https://api.github.com/users/olafurpg/followers",
        "following_url": "https://api.github.com/users/olafurpg/following{/other_user}",
        "gists_url": "https://api.github.com/users/olafurpg/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/olafurpg/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/olafurpg/subscriptions",
        "organizations_url": "https://api.github.com/users/olafurpg/orgs",
        "repos_url": "https://api.github.com/users/olafurpg/repos",
        "events_url": "https://api.github.com/users/olafurpg/events{/privacy}",
        "received_events_url": "https://api.github.com/users/olafurpg/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-03-17 09:27:05 UTC",
      "updated_at": "2016-03-17 09:27:05 UTC",
      "body": "I guess this snippet is taken from [TypedPipe.scala](https://raw.githubusercontent.com/twitter/scalding/develop/scalding-core/src/main/scala/com/twitter/scalding/typed/TypedPipe.scala)? I can reproduce the hanging behaviour on 0.1.3 but not on my 0.1.4 branch, which I hope to release later today."
    },
    {
      "url": "https://api.github.com/repos/olafurpg/scalafmt/issues/comments/197966406",
      "html_url": "https://github.com/olafurpg/scalafmt/issues/127#issuecomment-197966406",
      "issue_url": "https://api.github.com/repos/olafurpg/scalafmt/issues/127",
      "id": 197966406,
      "user": {
        "login": "ianoc",
        "id": 446652,
        "avatar_url": "https://avatars.githubusercontent.com/u/446652?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ianoc",
        "html_url": "https://github.com/ianoc",
        "followers_url": "https://api.github.com/users/ianoc/followers",
        "following_url": "https://api.github.com/users/ianoc/following{/other_user}",
        "gists_url": "https://api.github.com/users/ianoc/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ianoc/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ianoc/subscriptions",
        "organizations_url": "https://api.github.com/users/ianoc/orgs",
        "repos_url": "https://api.github.com/users/ianoc/repos",
        "events_url": "https://api.github.com/users/ianoc/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ianoc/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-03-17 16:40:59 UTC",
      "updated_at": "2016-03-17 16:40:59 UTC",
      "body": "@olafurpg Yep,from there. awesome, i'll give it a whirl again once the new version is out. Thanks for the quick response! "
    },
    {
      "url": "https://api.github.com/repos/olafurpg/scalafmt/issues/comments/198372453",
      "html_url": "https://github.com/olafurpg/scalafmt/issues/127#issuecomment-198372453",
      "issue_url": "https://api.github.com/repos/olafurpg/scalafmt/issues/127",
      "id": 198372453,
      "user": {
        "login": "olafurpg",
        "id": 1408093,
        "avatar_url": "https://avatars.githubusercontent.com/u/1408093?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/olafurpg",
        "html_url": "https://github.com/olafurpg",
        "followers_url": "https://api.github.com/users/olafurpg/followers",
        "following_url": "https://api.github.com/users/olafurpg/following{/other_user}",
        "gists_url": "https://api.github.com/users/olafurpg/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/olafurpg/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/olafurpg/subscriptions",
        "organizations_url": "https://api.github.com/users/olafurpg/orgs",
        "repos_url": "https://api.github.com/users/olafurpg/repos",
        "events_url": "https://api.github.com/users/olafurpg/events{/privacy}",
        "received_events_url": "https://api.github.com/users/olafurpg/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-03-18 13:55:35 UTC",
      "updated_at": "2016-03-18 13:55:35 UTC",
      "body": "Just released 0.1.4, it should sync with maven in a few minutes. So far, I've only tested against the Scala.js repo to find bugs and hanging behaviour. Soon I plan to enable those tests for [a whole bunch of more projects](https://github.com/olafurpg/scalafmt/blob/master/core/src/test/scala/org/scalafmt/util/ScalaProjectsExperiment.scala#L51)."
    },
    {
      "url": "https://api.github.com/repos/olafurpg/scalafmt/issues/comments/198397194",
      "html_url": "https://github.com/olafurpg/scalafmt/issues/127#issuecomment-198397194",
      "issue_url": "https://api.github.com/repos/olafurpg/scalafmt/issues/127",
      "id": 198397194,
      "user": {
        "login": "olafurpg",
        "id": 1408093,
        "avatar_url": "https://avatars.githubusercontent.com/u/1408093?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/olafurpg",
        "html_url": "https://github.com/olafurpg",
        "followers_url": "https://api.github.com/users/olafurpg/followers",
        "following_url": "https://api.github.com/users/olafurpg/following{/other_user}",
        "gists_url": "https://api.github.com/users/olafurpg/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/olafurpg/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/olafurpg/subscriptions",
        "organizations_url": "https://api.github.com/users/olafurpg/orgs",
        "repos_url": "https://api.github.com/users/olafurpg/repos",
        "events_url": "https://api.github.com/users/olafurpg/events{/privacy}",
        "received_events_url": "https://api.github.com/users/olafurpg/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-03-18 14:57:39 UTC",
      "updated_at": "2016-03-18 14:57:39 UTC",
      "body": "FWIW, I ran scalafmt on all of twitter/scalding and got the following results:\r\n\r\n\r\nFormatter timed out: 6\r\n\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/main/scala/com/twitter/scalding/macros/impl/TypeDescriptorProviderImpl.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/main/scala/com/twitter/scalding/typed/BijectedSourceSink.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/main/scala/com/twitter/scalding/typed/GeneratedFlattenGroup.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/main/scala/com/twitter/scalding/typed/Grouped.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-serialization/src/main/scala/com/twitter/scalding/serialization/JavaStreamEnrichments.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-serialization/src/main/scala/com/twitter/scalding/serialization/macros/impl/ordered_serialization/providers/ProductOrderedBuf.scala\r\n\r\norg.scalafmt.Error$CantFormatFile: 15\r\n\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-commons/src/main/scala/com/twitter/scalding/commons/source/VersionedKeyValSource.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-commons/src/test/scala/com/twitter/scalding/commons/extensions/CheckpointSpec.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/main/scala/com/twitter/scalding/FileSource.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/main/scala/com/twitter/scalding/macros/impl/FieldsProviderImpl.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/main/scala/com/twitter/scalding/serialization/WrappedSerialization.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/main/scala/com/twitter/scalding/typed/LookupJoin.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/test/scala/com/twitter/scalding/bdd/TypedApiTest.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/test/scala/com/twitter/scalding/mathematics/Matrix2OptimizationTest.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/test/scala/com/twitter/scalding/TypedPipeTest.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/test/scala/com/twitter/scalding/LookupJoinTest.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-hadoop-test/src/test/scala/com/twitter/scalding/reducer_estimation/ReducerEstimatorTest.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-serialization/src/main/scala/com/twitter/scalding/serialization/macros/impl/ordered_serialization/runtime_helpers/TraversableHelpers.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-serialization/src/test/scala/com/twitter/scalding/serialization/JavaStreamEnrichmentsProperties.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-thrift-macros/src/main/scala/com/twitter/scalding/thrift/macros/impl/ScroogeInternalOrderedSerializationImpl.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-thrift-macros/src/main/scala/com/twitter/scalding/thrift/macros/impl/ordered_serialization/ScroogeOrderedBuf.scala\r\n\r\nSuccess: 364\r\n\r\nI found a lot of similar issues formatting other repos, will work on those for the 0.1.5 release."
    },
    {
      "url": "https://api.github.com/repos/olafurpg/scalafmt/issues/comments/204337872",
      "html_url": "https://github.com/olafurpg/scalafmt/issues/127#issuecomment-204337872",
      "issue_url": "https://api.github.com/repos/olafurpg/scalafmt/issues/127",
      "id": 204337872,
      "user": {
        "login": "olafurpg",
        "id": 1408093,
        "avatar_url": "https://avatars.githubusercontent.com/u/1408093?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/olafurpg",
        "html_url": "https://github.com/olafurpg",
        "followers_url": "https://api.github.com/users/olafurpg/followers",
        "following_url": "https://api.github.com/users/olafurpg/following{/other_user}",
        "gists_url": "https://api.github.com/users/olafurpg/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/olafurpg/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/olafurpg/subscriptions",
        "organizations_url": "https://api.github.com/users/olafurpg/orgs",
        "repos_url": "https://api.github.com/users/olafurpg/repos",
        "events_url": "https://api.github.com/users/olafurpg/events{/privacy}",
        "received_events_url": "https://api.github.com/users/olafurpg/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-04-01 10:09:47 UTC",
      "updated_at": "2016-04-01 10:09:47 UTC",
      "body": "The scalafmt 0.1.5 test suite will include all scalding files except these three, which contain autogenerated code:\r\n\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/main/scala/com/twitter/scalding/typed/GeneratedFlattenGroup.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-serialization/src/main/scala/com/twitter/scalding/serialization/macros/impl/ordered_serialization/providers/ProductOrderedBuf.scala\r\nhttps://raw.githubusercontent.com/twitter/scalding/7759d9c399896fc4c54be0f2406e047e030d8586/scalding-core/src/main/scala/com/twitter/scalding/macros/impl/TypeDescriptorProviderImpl.scala\r\n\r\nI'm still trying to come up with a solution to gracefully handle auto generated code like that."
    }
  ],
  "created_at": "2016-03-17 00:54:18 UTC",
  "updated_at": "2016-04-01 15:24:45 UTC",
  "closed_at": "2016-04-01 15:24:41 UTC",
  "body": "Original:\r\n```scala\r\n /**\r\n   * If any errors happen below this line, but before a groupBy, write to a TypedSink\r\n   */\r\n  def addTrap[U >: T](trapSink: Source with TypedSink[T])(implicit conv: TupleConverter[U]): TypedPipe[U] =\r\n    TypedPipeFactory({ (flowDef, mode) =>\r\n      val fields = trapSink.sinkFields\r\n      // TODO: with diamonds in the graph, this might not be correct\r\n      val pipe = RichPipe.assignName(fork.toPipe[T](fields)(flowDef, mode, trapSink.setter))\r\n      flowDef.addTrap(pipe, trapSink.createTap(Write)(mode))\r\n      TypedPipe.from[U](pipe, fields)(flowDef, mode, conv)\r\n    })\r\n```\r\n\r\nScalafmt:\r\nNone it hangs\r\n\r\nI would like the input to look like this:\r\nI'd just like it to terminate\r\n\r\nUsing\r\n* 0.1.3"
}